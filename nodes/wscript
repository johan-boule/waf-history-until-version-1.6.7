#! /usr/bin/env python3

top = '.'
out = 'bin'

def options(opt):
	return
	print(opt)

def configure(conf):
	pass

def build(bld):

	print('...')
	print("root", bld.root.abspath(), bld.root)
	print("srcnode", bld.srcnode.abspath(), bld.srcnode)
	print("env", bld.env)

	w = bld.path.find_resource('wscript')
	print("wscript", w.abspath(), w)

	x = bld.path.find_or_declare('xyz.txt')
	print("build file", x.abspath(), x)
	print("    bld dir ", x.bld_dir())
	print("    suffix  ", x.suffix())
	print("ant_glob .   ->", bld.path.ant_glob('*'))
	print("ant_glob src ->", bld.path.ant_glob('src/*.txt'))

	print("")
	asrc = bld.path.find_resource("wscript")
	print("src node")
	print("  srcpath", asrc.srcpath())
	print("  bldpath", asrc.bldpath())

	print("")
	abld = bld.path.find_resource("xyz.txt")
	print("bld node")
	print("  srcpath", abld.srcpath())
	print("  bldpath", abld.bldpath())

	print("")
	adir = bld.path
	print("dir node")
	print("  srcpath", adir.srcpath())
	print("  bldpath", adir.bldpath())




	bld(rule='echo hi', always=True)
	bld(rule='touch ${TGT}', target='foo.txt', always=True)



	bld(rule='touch ${TGT}', target='aaa')
	bld(rule='touch ${TGT}', target='bbb', source='aaa')

def init(self):
	print('init')

def shutdown(self):
	print('shutdown')


def bar(ctx):
	print("command ok")


#-----------------------------------------------
# variant example below
# call "../waf debug"
#

import os
import Build, Constants, Options
from Base import command_context

@command_context('debug', 'build')
class debug_context(Build.BuildContext):
	def __init__(self, start=None):
		self.cache_dir = Options.out_dir + os.sep + Constants.CACHE_DIR
		self.out_dir = Options.out_dir + os.sep + 'test'
		Build.BuildContext.__init__(self, start=start)

# looks evil
#def debug(bld):
#	build(bld)

